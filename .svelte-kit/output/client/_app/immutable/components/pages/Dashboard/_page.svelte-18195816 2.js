import{S as ue,i as de,s as he,k as v,l as b,m as k,h as p,n as y,b as V,t as A,d as me,f as L,o as _e,g as fe,L as pe,x as le,y as oe,z as se,C as ge,A as re,a as E,q as x,c as I,r as N,H as h,J as ie,u as ce,M as ve}from"../../../chunks/index-7ca2b6e0.js";import{a as be,A as Q,d as X,O as ye,U as Z}from"../../../chunks/fb-10117989.js";import{S as De,N as ke}from"../../../chunks/Navbar-fedad836.js";let O;const Te=new Uint8Array(16);function Ue(){if(!O&&(O=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!O))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return O(Te)}const _=[];for(let n=0;n<256;++n)_.push((n+256).toString(16).slice(1));function $e(n,e=0){return(_[n[e+0]]+_[n[e+1]]+_[n[e+2]]+_[n[e+3]]+"-"+_[n[e+4]]+_[n[e+5]]+"-"+_[n[e+6]]+_[n[e+7]]+"-"+_[n[e+8]]+_[n[e+9]]+"-"+_[n[e+10]]+_[n[e+11]]+_[n[e+12]]+_[n[e+13]]+_[n[e+14]]+_[n[e+15]]).toLowerCase()}const Ee=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ee={randomUUID:Ee};function te(n,e,a){if(ee.randomUUID&&!e&&!n)return ee.randomUUID();n=n||{};const t=n.random||(n.rng||Ue)();if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,e){a=a||0;for(let l=0;l<16;++l)e[a+l]=t[l];return e}return $e(t)}function ne(n,e,a){const t=n.slice();return t[4]=e[a],t}function Ie(n){let e,a;return e=new De({}),{c(){le(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,l){se(e,t,l),a=!0},p:ge,i(t){a||(L(e.$$.fragment,t),a=!0)},o(t){A(e.$$.fragment,t),a=!1},d(t){re(e,t)}}}function Se(n){let e,a,t,l,i,u,d,o=n[1].name+"",r,m,g,R,B,U,H,P,j,M,W,q,$,C,z,J;e=new ke({props:{userDB:n[1],dashboard:!0}});let S=Object.values(n[1].notes),f=[];for(let s=0;s<S.length;s+=1)f[s]=ae(ne(n,S,s));return{c(){le(e.$$.fragment),a=E(),t=v("div"),l=v("div"),i=v("div"),u=v("h1"),d=x("Welcome To Your Dashboard, "),r=x(o),m=E(),g=v("p"),R=x("Here you can access all of your notes :D. (PS Click On Their Title To Open Them)"),B=E(),U=v("button"),H=x("Create Note"),P=E(),j=v("br"),M=E(),W=v("br"),q=E(),$=v("div");for(let s=0;s<f.length;s+=1)f[s].c();this.h()},l(s){oe(e.$$.fragment,s),a=I(s),t=b(s,"DIV",{class:!0});var D=k(t);l=b(D,"DIV",{class:!0});var T=k(l);i=b(T,"DIV",{class:!0});var c=k(i);u=b(c,"H1",{class:!0});var w=k(u);d=N(w,"Welcome To Your Dashboard, "),r=N(w,o),w.forEach(p),m=I(c),g=b(c,"P",{class:!0});var F=k(g);R=N(F,"Here you can access all of your notes :D. (PS Click On Their Title To Open Them)"),F.forEach(p),B=I(c),U=b(c,"BUTTON",{class:!0});var G=k(U);H=N(G,"Create Note"),G.forEach(p),P=I(c),j=b(c,"BR",{}),M=I(c),W=b(c,"BR",{}),q=I(c),$=b(c,"DIV",{class:!0});var K=k($);for(let Y=0;Y<f.length;Y+=1)f[Y].l(K);K.forEach(p),c.forEach(p),T.forEach(p),D.forEach(p),this.h()},h(){y(u,"class","text-5xl font-bold"),y(g,"class","py-6"),y(U,"class","btn text-white"),y($,"class","grid grid-cols-3 gap-2"),y(i,"class","max-w-md"),y(l,"class","hero-content text-center"),y(t,"class","hero min-h-screen bg-base-200 has-text-centered ")},m(s,D){se(e,s,D),V(s,a,D),V(s,t,D),h(t,l),h(l,i),h(i,u),h(u,d),h(u,r),h(i,m),h(i,g),h(g,R),h(i,B),h(i,U),h(U,H),h(i,P),h(i,j),h(i,M),h(i,W),h(i,q),h(i,$);for(let T=0;T<f.length;T+=1)f[T].m($,null);C=!0,z||(J=ie(U,"click",n[2]),z=!0)},p(s,D){const T={};if(D&2&&(T.userDB=s[1]),e.$set(T),(!C||D&2)&&o!==(o=s[1].name+"")&&ce(r,o),D&2){S=Object.values(s[1].notes);let c;for(c=0;c<S.length;c+=1){const w=ne(s,S,c);f[c]?f[c].p(w,D):(f[c]=ae(w),f[c].c(),f[c].m($,null))}for(;c<f.length;c+=1)f[c].d(1);f.length=S.length}},i(s){C||(L(e.$$.fragment,s),C=!0)},o(s){A(e.$$.fragment,s),C=!1},d(s){re(e,s),s&&p(a),s&&p(t),ve(f,s),z=!1,J()}}}function ae(n){let e,a,t=n[4].title+"",l,i,u,d,o;return{c(){e=v("div"),a=v("a"),l=x(t),u=E(),this.h()},l(r){e=b(r,"DIV",{class:!0});var m=k(e);a=b(m,"A",{href:!0,class:!0});var g=k(a);l=N(g,t),g.forEach(p),u=I(m),m.forEach(p),this.h()},h(){y(a,"href",i="/editor/"+n[4].docid),y(a,"class","subtitle text-center"),y(e,"class","box svelte-z2g42p")},m(r,m){V(r,e,m),h(e,a),h(a,l),h(e,u),d||(o=ie(e,"click{go}",n[3]),d=!0)},p(r,m){m&2&&t!==(t=r[4].title+"")&&ce(l,t),m&2&&i!==(i="/editor/"+r[4].docid)&&y(a,"href",i)},d(r){r&&p(e),d=!1,o()}}}function we(n){let e,a,t,l;const i=[Se,Ie],u=[];function d(o,r){return o[0]!=="Loading..."&&o[0]!==null&&o[1]!=="Loading..."&&o[1]!==null?0:1}return a=d(n),t=u[a]=i[a](n),{c(){e=v("html"),t.c(),this.h()},l(o){e=b(o,"HTML",{"data-theme":!0});var r=k(e);t.l(r),r.forEach(p),this.h()},h(){y(e,"data-theme","pastel")},m(o,r){V(o,e,r),u[a].m(e,null),l=!0},p(o,[r]){let m=a;a=d(o),a===m?u[a].p(o,r):(fe(),A(u[m],1,1,()=>{u[m]=null}),me(),t=u[a],t?t.p(o,r):(t=u[a]=i[a](o),t.c()),L(t,1),t.m(e,null))},i(o){l||(L(t),l=!0)},o(o){A(t),l=!1},d(o){o&&p(e),u[a].d()}}}function Ce(n,e,a){let t="Loading...",l="Loading...";_e(async()=>{be.onAuthStateChanged(async d=>{if(d){a(0,t=d),d.uid;const o=Q(X,"Users",t.uid),r=await ye(o);if(r.exists())a(1,l=r.data());else{let m=te();const g={};g[m]={title:"Welcome to AiNotes!",noteContent:"This is a note. Try using AI to autocomplete your notes!",docid:m},Z(o,{email:t.email,uid:t.uid,name:t.displayName,credits:300,notes:g}),a(1,l={email:t.email,uid:t.uid,name:t.displayName,credits:300,notes:g})}}else location.href="/"})});async function i(){a(0,t="Loading...");let d=te();const o=l.notes;o[d]={title:"Untitled Document",noteContent:"",docid:d};const r=Q(X,"Users",l.uid);await Z(r,{email:l.email,uid:l.uid,name:l.name,credits:l.credits,notes:o}).then(()=>{setTimeout(()=>{location.href="/editor/"+d},500)})}function u(d){pe.call(this,n,d)}return[t,l,i,u]}class Ve extends ue{constructor(e){super(),de(this,e,Ce,we,he,{})}}export{Ve as default};
